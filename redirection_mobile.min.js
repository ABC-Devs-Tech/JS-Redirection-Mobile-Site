/*
* JS Redirection Mobile
*
* Developed by
* Sebastiano Armeli-Battana (@sebarmeli) - http://www.sebastianoarmelibattana.com
* Dual licensed under the MIT or GPL Version 3 licenses.
* 
* @version 0.8 
*/
if(!window.SA){window.SA={};}SA.redirection_mobile=function(c){var a=function(j){var i=new Date();i.setTime(i.getTime()+j);return i;};var h=function(o){if(!o){return;}var j=document.location.search,p=j&&j.substring(1).split("&"),l=0,n=p.length;for(;l<n;l++){var k=p[l],m=k&&k.substring(0,k.indexOf("="));if(m===o){return k.substring(k.indexOf("=")+1,k.length);}}};var e=navigator.userAgent.toLowerCase(),g="false",d="true",c=c||{};redirection_param=c.redirection_paramName||"mobile_redirect",mobile_prefix=c.mobile_prefix||"m",mobile_url=c.mobile_url,mobile_protocol=c.mobile_scheme?c.mobile_scheme+":":document.location.protocol,host=document.location.host,queryValue=h(redirection_param),mobile_host=mobile_url||(mobile_prefix+"."+(!!host.match(/^www\./i)?host.substring(4):host)),cookie_hours=c.cookie_hours||1,isUAMobile=!!(e.match(/(iPhone|iPod|blackberry|android|htc|kindle|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|Playstation Portable|SonyEricsson|Samsung|MobileExplorer|PalmSource|Benq|Windows Phone|Windows Mobile|IEMobile|Windows CE|Nintendo Wii)/i));if(document.referrer.indexOf(mobile_host)>=0||queryValue===g){if(window.sessionStorage){window.sessionStorage.setItem(redirection_param,g);}else{document.cookie=redirection_param+"="+g+";expires="+a(3600*1000*cookie_hours).toUTCString();}}var b=(window.sessionStorage)?(window.sessionStorage.getItem(redirection_param)===g):false,f=document.cookie?(document.cookie.indexOf(redirection_param)>=0):false;if(!!(e.match(/(iPad)/i))){(c.ipad_redirection===d)?isUAMobile=true:isUAMobile=false;}if(isUAMobile&&!(f||b)){if(c.beforeredirection_callback){c.beforeredirection_callback.call(this);}document.location.href=mobile_protocol+"//"+mobile_host;}};